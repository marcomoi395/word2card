<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Word2Card</title>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        />
        <link rel="stylesheet" href="styles.css" />
    </head>
    <body>
        <div id="bg-mascot"></div>
        <header>
            <div class="window-controls">
                <button
                    class="btn"
                    id="tab-settings-btn"
                    title="Settings"
                    onclick="switchTab('settings')"
                >
                    <i class="fa-solid fa-gear settings-icon"></i>
                </button>
                <button class="btn" id="minimize-btn" title="Minimize">
                    <i class="fa-solid fa-minus minus-icon"></i>
                </button>
                <button class="btn" id="close-btn" title="Close">
                    <i class="fa-solid fa-xmark mark-icon"></i>
                </button>
            </div>
        </header>
        <main>
            <div class="app-title">Word2Card</div>
            <nav>
                <button id="tab-import-btn" class="active-btn" onclick="switchTab('import')">
                    File Import
                </button>
                <button id="tab-notion-btn" onclick="switchTab('notion')">Notion Sync</button>
            </nav>
            <section class="active-section" id="section-import">
                <form id="form-import">
                    <div class="form-group">
                        <input
                            type="text"
                            id="source-file"
                            name="sourceFile"
                            placeholder="Choose input file..."
                        />
                    </div>
                    <br />

                    <div class="form-group">
                        <input
                            type="text"
                            id="deck"
                            name="deck"
                            placeholder="Deck Name (e.g., Vocabulary::Imported)"
                        />
                    </div>
                    <br />

                    <div class="options-group">
                        <div class="flashcard-option">
                            <input type="checkbox" id="chk-flashcard-import" name="isFlashcard" />
                            <label for="chk-flashcard-import">Flashcard</label>
                        </div>
                        <div class="quiz-option">
                            <input type="checkbox" id="chk-quiz-import" name="isQuiz" />
                            <label for="chk-quiz-import">Quiz</label>
                        </div>
                    </div>
                    <br />
                    <button class="submit-btn" type="submit" id="btn-action-import">Submit</button>
                </form>
            </section>

            <section id="section-notion" style="display: none">
                <form id="form-notion">
                    <div class="form-group">
                        <input
                            id="notion-token"
                            name="notionToken"
                            placeholder="Integration Token (e.g., secret_xxxxx)"
                        />
                    </div>
                    <br />

                    <div class="form-group">
                        <input
                            type="text"
                            id="deck"
                            name="deck"
                            placeholder="Deck Name (e.g., Vocabulary::Imported)"
                        />
                    </div>
                    <br />

                    <div class="options-group">
                        <div class="quiz-option">
                            <input type="checkbox" id="chk-flashcard-notion" name="isFlashcard" />
                            <label for="chk-flashcard-notion">Flashcard</label>
                        </div>
                        <div class="flashcard-option">
                            <input type="checkbox" id="chk-quiz-notion" name="isQuiz" />
                            <label for="chk-quiz-notion">Quiz</label>
                        </div>
                    </div>
                    <br />
                    <button class="submit-btn" type="submit" id="btn-action-sync">Sync</button>
                </form>
            </section>

            <section id="section-settings" style="display: none">
                <form id="form-settings">
                    <div class="form-group">
                        <input
                            type="text"
                            id="openai-key-global"
                            name="openaiKeyGlobal"
                            placeholder="OpenAI API Key (e.g., sk-...)"
                        />
                    </div>
                    <br />

                    <div class="form-group">
                        <input
                            type="text"
                            id="azure-key-global"
                            name="azureKeyGlobal"
                            placeholder="Azure Speech Key"
                        />
                    </div>
                    <br />

                    <div class="form-group">
                        <input
                            type="text"
                            id="unsplash-access-key-global"
                            name="unsplashAcessKeyGlobal"
                            placeholder="Unsplash Access Key"
                        />
                    </div>
                    <br />
                    <button class="submit-btn" type="button" id="btn-save-settings">
                        Save Keys
                    </button>
                </form>
            </section>
        </main>
        <script type="module" src="./src/renderer.ts"></script>
        <script>
            const platform = window.api.platform
            const minimizeBtn = document.getElementById('minimize-btn')
            if (minimizeBtn) {
                minimizeBtn.addEventListener('click', () => {
                    window.api.minimize()
                })
            }

            if (platform === 'linux') {
                if (minimizeBtn) {
                    minimizeBtn.style.display = 'none'
                }
            }

            const closeBtn = document.getElementById('close-btn')
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    window.api.close()
                })
            }

            function switchTab(tabName) {
                const importSection = document.getElementById('section-import')
                const notionSection = document.getElementById('section-notion')
                const settingsSection = document.getElementById('section-settings')

                ;[importSection, notionSection, settingsSection].forEach((section) => {
                    if (section) section.classList.remove('active-section')
                })

                if (tabName === 'import') importSection.classList.add('active-section')
                else if (tabName === 'notion') notionSection.classList.add('active-section')
                else if (tabName === 'settings') settingsSection.classList.add('active-section')

                const btnImport = document.getElementById('tab-import-btn')
                const btnNotion = document.getElementById('tab-notion-btn')
                const btnSettings = document.getElementById('tab-settings-btn')

                ;[btnImport, btnNotion, btnSettings].forEach((btn) => {
                    if (btn) btn.classList.remove('active-btn')
                })

                if (tabName === 'import') btnImport.classList.add('active-btn')
                else if (tabName === 'notion') btnNotion.classList.add('active-btn')
                else if (tabName === 'settings') btnSettings.classList.add('active-btn')

                const mascot = document.getElementById('bg-mascot')

                mascot.classList.remove('bg-import', 'bg-notion', 'bg-settings')

                if (tabName === 'import') {
                    mascot.classList.add('bg-import')
                } else if (tabName === 'notion') {
                    mascot.classList.add('bg-notion')
                } else if (tabName === 'settings') {
                    mascot.classList.add('bg-settings')
                }
            }

            switchTab('import')
        </script>
    </body>
</html>
